INFO:root:Creating Config from file: ./gentpool/pool/hw2_agent_2/agent.yaml
INFO:root:Starting to load configuration from ./gentpool/pool/hw2_agent_2/agent.yaml
INFO:root:Successfully loaded configuration from ./gentpool/pool/hw2_agent_2/agent.yaml
INFO:root:--------------------
INFO:root:[green]Welcome to Gentopia!
INFO:root:--------------------
INFO:root:[green]User: 
INFO:root:hw2_agent_2 is thinking...
INFO:root:Done
INFO:root:[blue]hw2_agent_2: 
INFO:root:{"name":"pdf_reader", "arguments":{"path_to_pdf":"/Users/ankitkumar/Library/CloudStorage/OneDrive-GeorgeMasonUniversity-O365Production/College/3rdSem/CS678/NLP/Hw2/handout-3.pdf"}}

INFO:root:Calling function: pdf_reader ...
INFO:root:Done
INFO:root:--------------------
INFO:root:Homework 2: Practices of Large Language Models CS 678
HOMEWORK 2
PRACTICES OF LARGE LANGUAGE MODELS1
CS 678 A DVANCED NATURAL LANGUAGE PROCESSING (FALL 2024)
https://nlp.cs.gmu.edu/course/cs678-fall24/
OUT: Friday, September 20, 2024
DUE: Friday, October 11, 2024
Your name:
Your GID:
IMPORTANT: The homework is accompanied by a Python notebook and a GitHub code repository. For
Part 1 , after copying this notebook to your Google Drive or One Drive, please paste a link to it below. To
get a publicly accessible link, hit the Share button at the top right, then click “Get shareable link” and copy
over the result. For Part 2 , fork the public code repository to your own space and share a link to your code
repository in the link below. When you are done, submit your completed .pdf report to Gradescope.
If you fail to do this, you will receive no credit for this homework!
Note 1: You will only need to run lightweight code for this assignment, which can be done locally on
your machine (i.e., ORC GPUs are not required).
Note 2: Both parts require using OpenAI API. Please make sure to REMOVE your private key from
your notebook and code repository before submission.
Your Notebook solution for Part 1:
Your GitHub code repository for Part 2:
Graded Questions: 100 points
Bonus Questions: 20 points
Total Points Available: 120/100
Additional Notes:
• Upload the whole report PDF (including all pages, also if you’re scanning it).
• All questions only require written answers in this PDF. For coding problems, you will have to fill out
all code blocks that say YOUR CODE HERE in your notebook or per instruction.
• For text-based answers, you should replace the text that says ”Write your answer here...” with your
actual answer.
1Compiled on Thursday 26thSeptember, 2024 at 02:32
1 of 8Homework 2: Practices of Large Language Models CS 678
Part 1: Introduction to Prompts [50 pts]
This section uses the paired Python notebook. Below, provide the answers to the questions as generated by
the completed code blocks in the similarly marked questions. Please also make sure to set up the Python
environment (Task 0) before you run the notebook.
Task 1: Story Generation with Different Sampling Strategies
1. (5 points) Can you use the ChatCompletion function to generate a story about an Indian student study-
ing abroad (e.g., at George Mason University)? Please use the default setting and generate only one
story.
Give the output of your gpt-4o-mini here.
2. (5 points) Now, can you do the same but try to get 2 generation outputs with “top p” set to be 1?
Give the output of your gpt-4o-mini here.
3. (5 points) How about 2 generation outputs with “top p” set to be 0.5?
Give the output of your gpt-4o-mini here.
4. (10 points) What did you observe from Q1 - Q3? Did the different “top p” configurations give you the
same or different results? Why?
Write your answer here...
2 of 8Homework 2: Practices of Large Language Models CS 678
Task 2: gpt-4o-mini for Solving Mathematical Problems
5. (5 points) You are presented a mathematical problem: Melanie is a door-to-door saleswoman. She sold
a third of her vacuum cleaners at the green house, 2 more to the red house, and half of what was left at
the orange house. If Melanie has 5 vacuum cleaners left, how many did she start with? Can you use the
ChatCompletion function and prompt gpt-4o-mini to work out the problem?
Give the output of your gpt-4o-mini here.
Did gpt-4o-mini solve the problem correctly? If not, where did it go wrong?
Provide your observations and findings here.
6. (10 points) Now, try to get 10 solutions from gpt-4o-mini with ”top p” set to 0.7. You may see multiple
different answers produced by gpt-4o-mini. Summarize them in the table below and give one example
output from gpt-4o-mini each. Did gpt-4o-mini do right in all of the solutions? If there are any mistakes,
what are the common errors that gpt-4o-mini makes?
Answer Count Example Output
Ans1 counts out of
10Give ONE output with this answer here
Ans2 counts out of
10R2
Ans3 counts out of
10R3
Provide your observations and findings here.
3 of 8Homework 2: Practices of Large Language Models CS 678
7. (10 points) Can you try other ways to prompt gpt-4o-mini to give correct solutions more stably? Be
creative! Include your prompt design and the answer in the report. Why do you think it works or not?
Prompt:
Provide your prompt here
Output:
Provide the gpt-4o-mini output here
Findings: Provide your observations and findings here.
4 of 8Homework 2: Practices of Large Language Models CS 678
Part 2: Build an LLM Agent with Gentopia [50 pts + 20 bonus pts]
In this part, we will switch to an extended topic called “LLM agents”. In Part 1, we have mainly used
gpt-4o-mini as a question-answer system, but an LLM can be formulated to be a “vivid” agent who
learns to use tools and helps us in broader tasks, just like a virtual assistant!
To this end, we will be using an open-source LLM agent implementation framework, called “Gen-
topia” [2]. The original code repository can be found at https://github.com/Gentopia-AI ,
but note that for this assignment, we will use this adapted “Gentopia-Mason” version at https:
//github.com/LittleYUYU/Gentopia-Mason/tree/main .
Prerequsite: Library Installation
As the first step, please make sure to install all required Python packages following the instructions on
README. More specifically, it means to run the following lines of code:
1# Clone the repository
2git clone git@github.com:LittleYUYU/Gentopia-Mason.git
3cd Gentopia-Mason
4
5# Create a conda virtual environment
6conda create --name gentenv python=3.10
7conda activate gentenv
8pip install -r requirements.txt
9
10# Set up global environment
11export PYTHONPATH="$PWD/Gentopia:$PYTHONPATH"
12
13# Set up OpenAI API key
14cd GentPool
15touch .env
16echo "OPENAI_API_KEY=<your_openai_api_key>" >> .env
Task 3: Build a Vanilla LLM Agent
In this task, you will follow the instructions at https://github.com/LittleYUYU/Gentopia-Mason/
tree/main?tab=readme-ov-file#quick-start-clone-a-vanilla-llm-agent to
create a vanilla LLM agent. This agent is essentially the same question-answer model you have tried in
Part 1.
The agent, under the framework of Gentopia, is configured as follows (with annotations):
1# ./GentPool/gentpool/pool/<your_agent_name>/agent.yaml
2# Vanilla agent template
3
4name: <your_agent_name>
5version: 0.0.1
6type: vanilla
7description: A plain gpt-4 LLM. # this is a brief description of the agent
8target_tasks:
9- anything to do with an LLM
10llm:
11 model_name: gpt-4 # indicating the API version
12 params:
13 temperature: 0.0 # both temperature and top_p are used to control the
sampling diversity
5 of 8Homework 2: Practices of Large Language Models CS 678
14 top_p: 0.9
15 repetition_penalty: 1.0 # this is for preventing repetitive tokens
16 max_tokens: 1024 # maximum generation length
17prompt_template: !prompt VanillaPrompt # this is prompt we used for this agent,
see ./Gentopia/gentopia/prompt/vanilla.py
8. (10 points) Change the ”model name” field from ”gpt-4” to ”gpt-4o-mini”. Successfully run this
agent, and copy its responses for the following conversations below:
User: Hi! Tell me something about George Mason NLP group!
your agent name: Copy the agent response here.
User: Who is/are leading the group?
your agent name: Copy the agent response here.
What problems did you see from the second response?
Provide a short answer here
9. (10 points) Now, let’s do a trick here. Instead of asking two questions, let’s ask a combined one. And
similarly let’s also try the second question asking about facts:
User: Who is/are leading George Mason NLP group?
your agent name: Copy the agent response here.
User: Find papers written by Ziyu Yao at George Mason University
your agent name: Copy the agent response here.
How do the responses look now? (Hint: you may want to verify the agent output.) Why would this
situation happen? Describe your observations and findings below:
Provide a short answer here
Till now, you probably have realized that an LLM alone will be facing various problems, including not
being able to access the latest knowledge. Therefore, we’d like to try something called “tool-augmented
LLM agent”, where an LLM agent can be equipped with external tools for tasks. This is what we will
do in Task 4!
6 of 8Homework 2: Practices of Large Language Models CS 678
Task 4: Build a Tool-Augmented LLM Agent
Now, we will follow the instructions at https://github.com/LittleYUYU/Gentopia-Mason/
tree/main?tab=readme-ov-file#implement-a-scholar-llm-agent-with-tool-augmentation
and create a tool-augmented LLM agent. In particular, this agent, called a “scholar agent”, has been
equipped with tools to access Google Scholar.2
This tool use does not come for free; it relies on Python implementation using the “scholarly” library,3
which can be found within the gentopia source code at https://github.com/LittleYUYU/
Gentopia-Mason/blob/main/Gentopia/gentopia/tools/google_scholar.py .
Again, change the ”model name” field to ”gpt-4o-mini”.
10. (10 points) Now, let’s the same query for Prof. Ziyu Yao’s papers again:
User: Find papers written by Ziyu Yao at George Mason University
your agent name: Copy the agent response here.
Does the response look reasonable now? Based on the meta information that popped out through the
agent’s responding process, can you describe how the agent made it right this time?
Provide your answer here.
11. (5 points) Look at the configuration file of your scholar agent at ./GentPool/gentpool/pool/
<your_agent_name>/agent.yaml and see what other functions are supported. Try a few other
things you found interesting! Some examples to consider: Can you summarize the paper titled ”Gen-
topia: A collaborative platform for tool-augmented llms”? ,What papers have cited ”Gentopia: A
collaborative platform for tool-augmented llms” , etc.
User: Your query
your agent name: Copy the agent response here.
2https://scholar.google.com/
3https://pypi.org/project/scholarly/
7 of 8Homework 2: Practices of Large Language Models CS 678
12. (15 points) You may have realized that the current scholar agent still fails to answer general ques-
tions such as “Tell me something about George Mason NLP group”, though they are also relevant to
“scholar”. In addition, it cannot read PDFs for summarizing papers either, so it cannot provide answers
to specific questions about the paper details. Can you figure out a way for the agent to do Google
Search (5 pts) and PDF reading (10 pts), and present a few examples below? (Hint: Google Search has
been provided in Gentopia’s source code, whereas you could opt for any Python tools you like, e.g.,
PyPDF2,4for PDF reading.)
User: Your query
your agent name: Copy the agent response here.
Bonus: Build Your Own Agent! (20 pts)
We will provide up to 20 points to students who implement a different tool-augmented LLM agent for
positive use (i.e., the agent cannot be designed for unethical purposes) . To claim bonus points, the agent
needs to be substantially different from the scholar agent and others included in Gentopia’s agent pool. Be
creative! Partial credits may be provided based on student effort.
Acknowledgment
The mathematical problems used in this assignment come from the GSM8k dataset [1], and the source code
of Gentopia comes from the referred EMNLP’23 paper [2].
References
[1] Karl Cobbe, Vineet Kosaraju, Mohammad Bavarian, Mark Chen, Heewoo Jun, Lukasz Kaiser, Matthias
Plappert, Jerry Tworek, Jacob Hilton, Reiichiro Nakano, et al. Training verifiers to solve math word
problems. arXiv preprint arXiv:2110.14168 , 2021.
[2] Binfeng Xu, Xukun Liu, Hua Shen, Zeyu Han, Yuhan Li, Murong Yue, Zhiyuan Peng, Yuchen Liu,
Ziyu Yao, and Dongkuan Xu. Gentopia.AI: A collaborative platform for tool-augmented llms. In
Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing: System
Demonstrations , pages 237–245, 2023.
4https://www.geeksforgeeks.org/working-with-pdf-files-in-python/
8 of 8
INFO:root:--------------------
INFO:root:hw2_agent_2 is thinking...
INFO:root:Done
INFO:root:[blue]hw2_agent_2: 
INFO:root:The PDF titled "Homework 2: Practices of Large Language Models" for the course CS 678 (Advanced Natural Language Processing) outlines the requirements and tasks for the homework assignment. Here are the key points from the document:

### General Information
- **Course**: CS 678 Advanced Natural Language Processing (Fall 2024)
- **Release Date**: September 20, 2024
- **Due Date**: October 11, 2024
- **Total Points**: 120 (100 for graded questions, 20 for bonus questions)

### Submission Requirements
- Students must submit a completed PDF report to Gradescope.
- A Python notebook and a GitHub code repository are required for the assignment.
- Students must ensure their OpenAI API key is removed before submission.

### Part 1: Introduction to Prompts (50 points)
- **Task 1**: Story generation using different sampling strategies with the ChatCompletion function.
- **Task 2**: Solving mathematical problems using gpt-4o-mini and analyzing the outputs.
- **Task 3**: Experimenting with prompt designs to improve solution accuracy.

### Part 2: Build an LLM Agent with Gentopia (50 points + 20 bonus points)
- **Task 4**: Create a vanilla LLM agent and test its responses to user queries.
- **Task 5**: Build a tool-augmented LLM agent that can access Google Scholar for research tasks.
- **Bonus Task**: Implement a different tool-augmented LLM agent for positive use.

### Additional Notes
- The homework emphasizes the importance of using OpenAI API and provides instructions for setting up the environment.
- Students are encouraged to explore various functionalities of the Gentopia framework and to be creative in their approach to building agents.

This document serves as a comprehensive guide for students to complete their homework effectively, ensuring they understand the tasks and submission requirements. If you need more specific information or details about any section, feel free to ask!
INFO:root:Done
INFO:root:[green]User: 
